{% extends "app_layout.html" %}

{% block header_title %}
    {{ title }}    
{% endblock %}

{% block title %}
    <a id="top">{{ title }}</a>
{% endblock %}

{% block navbar %}

{{ super() }}

{% include "app_navbar_wells_dropdown.html" %}

{% endblock %}

{% block content %}

<p><a href="#queries-for-other-systems">Skip down to queries for other systems</a></p>

<button type="button" class="collapsible-query-form-button">Open query/filter/sort form >>></button>

<div class="collapsible-query-form" id="collapsible-query-form">
    <p>
        <form action="/app/{{ redirect_to }}">
            <b>Search:</b>
            <br />
            <div class="floating-block">
                <label>Well identifiers:</label> <br />
                <textarea name="idq" rows="1" cols="30">{{ query.idq }}</textarea>
                <br>
                <input type="checkbox" name="idq_unit_no" id="idq_unit_no" value="1" checked />
                <label for="idq_unit_no">Find unit numbers</label>
                <br>
                <input type="checkbox" name="idq_obs_no" id="idq_obs_no" value="1" checked />
                <label for="idq_obs_no">Find observation well IDs</label>
                <br>
                <input type="checkbox" name="idq_dh_no" id="idq_dh_no" value="1" />
                <label for="idq_dh_no">Find drillhole numbers</label>
                <br>
                <label>Include wells within this distance:</label>
                <br>
                <input type="number" name="idq_distance" step=0.01 value="{{ query.idq_distance }}"/> km (use 0 to disable)
            </div>
            <div class="floating-block">
                <label>Group code:</label>
                <input type="text" name="group_code" value="{{ query.group_code }}" /> 
                <br>   
                <label>SWL statuses:</label>
                <input type="text" name="swl_status" value="{{ query.swl_status }}" /> - comma-separated list of either C, H, or N 
                <br>(Use "C,H,N" to select all values if you want to filter with a different field)
                <br>
                <label>TDS statuses:</label>
                <input type="text" name="tds_status" value="{{ query.tds_status }}" /> - as above
                <br>
                <label>SWL frequencies:</label>
                <input type="text" name="swl_freq" value="{{ query.swl_freq }}" /> - comma-separated list of frequencies.
                <br>(To select all use "1,2,3,4,6,12,24,R,S" )
                <br>
                <label>TDS statuses:</label>
                <input type="text" name="tds_freq" value="{{ query.tds_freq }}" /> - as above
                <br>
                <label>Filter by comment field:</label>
                <input type="text" name="filter_group_comment" value="{{ query.filter_group_comment }}" /> - use * to match anything
            </div>
            
            <div class="floating-block">
                <label>Drillhole name containing:</label>
                <input type="date" name="salinity_creation_date" value="{{ query.salinity_creation_date }}" />
                <br>
                <label>Salinity records created by:</label>
                <input type="text" name="salinity_created_by" value="{{ query.salinity_created_by }}" />
                <br>(Use % to match anything)
            </div>
            <div class="floating-block">
                <label>Drillhole name containing:</label>
                <input type="text" name="name_fragment" value="{{ query.name_fragment }}" />
            </div>
            <div class="floating-block">
                <label>Aquifer monitored code:</label>
                <input type="text" name="aq_mon" value="{{ query.aq_mon }}" />
                <br>(Must match exactly e.g. "Qpcb" will not match "Qpch+TpQau")
            </div>
            <div class="floating-block">
                <label>Aquifer code:</label>
                <input type="text" name="aquifer_code" value="{{ query.aquifer_code }}" /> ("Tbw" will also match "Qpcb+Tbw")
                <br>
                <input type="checkbox" name="include_historical_aquifers" id="include_historical_aquifers" value="1" {% if query.include_historical_aquifers %}checked{% endif %} />
                <label for="include_historical_aquifers">Include historical aquifer designations</label>
            </div>
            <div class="floating-block">
                <label>Special URL string:</label>
                <input type="text" name="url_str" value="{{ query.url_str }}" />
            </div>
            <br />
            <b>Filter:</b>
            <br />
            <div class="floating-block">
                TBA
            </div>
            <br>
            <b>Sort:</b>
            <br />
            <div class="floating-block">
                TBA
            </div>
            <input type="hidden" name="env" value="{{ env }}" />
            <br>
            <input type="reset">
            <button type="submit">
                Submit
            </button>
            
        </form>
    </p>
</div>

{% block wells_content %}
{% endblock %}

<div>
    <h2 id="queries-for-other-systems">Queries for other systems</h2>
    <p><a href="#top">Return to the top of this page</a></p>
    <h3>EGIS layer definition query (ArcGIS / QGIS)</h3>
    <p>{{ egis_layer_definition_query }}</p>
</div>

<script>
    var coll = document.getElementsByClassName("collapsible-query-form-button");
    var form_content = document.getElementById("collapsible-query-form");
    var i;

    for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.display === "flex") {
        content.style.display = "none";
        } else {
        content.style.display = "flex";
        }
    });
    }

    if ({{ wells|length }} < 1) {
        if (form_content.style.display === "flex") {
            form_content.style.display = "none";
        } else {
            form_content.style.display = "flex";
        }
    }

</script>

{% endblock %}