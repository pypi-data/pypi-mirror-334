# Плагин взаимодействия с ГИС Дошкольное образование

## Настройки подключения плагина:
Для подключения плагина к системе нужно: 

- добавить пакет в список INSTALLED_APPS;
- Запустить миграции.

Расчет плагин ведет через `task celery`. Поэтому перед его включением проверьте, что у вас настроена очередь и брокер 
задач.
Для периодического автоподсчета задач требуется процесс `celery beat`.

1. Добавить в файл `kinder.conf` следующие настройки:
::

  [gisdo]
  PUSH_DATA_URL = http://31.13.128.102/pe/pushdataservice.easasmx?WSDL
  FEDERAL_DISTRICT = VOLGA_REGION
  [region]
  REGION_CODE = 16

`PUSH_DATA_URL`
  параметр отвечает за адрес wsdl сервиса приема показателей.

`FEDERAL_DISTRICT`
  параметр настраивается в соответствии с федеральным округом, в котором установлена система. Значения:

- `VOLGA_REGION` -            **Поволжский Федеральный округ**
- `SIBERIAN_REGION` -         **Сибирский Федеральный округ**
- `CENTRAL_REGION` -          **Центральный Федеральный округ**
- `NORTHWEST_REGION` -        **Северо-Западный федеральный округ**
- `FAR_EASTERN_REGION` -      **Дальневосточный федеральный округ**
- `URALIAN_REGION` -          **Уральский федеральный округ**
- `NORTH_CAUCASUS_REGION` -   **Северо-Кавказский федеральный округ**
- `SOUTH_REGION` -            **Южный Федеральный округ**

`REGION_CODE`
  код региона

2. Запустить 1 процесс Celery для работы с периодическими задачами и отдельную очередь задач для гисдо(c версии 2.1.0):

    ```
    celery -A kinder beat -l INFO
    celery -A kinder worker -l INFO --app=kinder.celery_app:app -Q gisdo -c 4
    ```    
